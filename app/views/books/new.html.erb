<div class="container">
  <h1>添加小说</h1>
  <div>
    <%= form_for(@book, html:{ class: "form-horizontal"}) do |f| %>
      <div class="form-group">
        <label class="col-sm-2 control-label">名称</label>
        <div class="col-sm-10">
           <%= f.text_field :title, class:"form-control", readonly: (@book.new_record? ? false: true) %>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label">所属分类</label>
        <div class="col-sm-10">
          <%= f.select :classification_id, @classifications, {}, class: "form-control", require: true%>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label">类型</label>
        <div class="col-sm-10">
          <%= f.select :book_type, Book.book_types_options, { include_blank: "选择类型" }, class: "form-control", require: true%>
        </div>
      </div>
      <div class="form-group book_type_reprint" style="display: <%= @book.book_type == 1 ? 'block': 'none'  %>;">
        <label class="col-sm-2 control-label">作者名</label>
        <div class="col-sm-10">
          <%= text_field_tag :author_name, "", class: "form-control", require: false%>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label">简介</label>
        <div class="col-sm-10">
          <%= f.text_area :introduction,  { class: "form-control" }%>
        </div>
      </div>
      <div class="form-group">
        <label class="col-sm-2 control-label">备注</label>
        <div class="col-sm-10">
          <%= f.text_field :remarks,  { class: "form-control" }%>
        </div>
      </div><div class="form-group">
        <label class="col-sm-2 control-label">标签</label>
        <div class="col-sm-10">
          <%= text_field_tag :tag_names,"",class: "form-control"%>
        </div>
      </div>
      <%= f.submit '提交', class: "btn btn-primary float-r" %>
    <% end %>
  </div>
</div>

<script>
  $(function(){
    $("#book_book_type").on("change",function(){
      if($(this).val() == 1){
        $(".book_type_reprint").show();
      }else{
        $(".book_type_reprint").hide();
      }
    })
  })
</script>